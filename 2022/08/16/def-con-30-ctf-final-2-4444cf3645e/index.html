<!DOCTYPE html><html class="appearance-auto" lang="zh-TW"><head><meta charset="UTF-8"><title>DEF CON 30 CTF final 遊記（中） - Huli's blog</title><meta name="description" content="上一篇裡面寫到了從台灣到美國的過程，以及對拉斯維加斯的一些心得，這篇就來寫一下 DEF CON 本身以及 CTF 的一些心得。
讓我們先來看一下 DEF CON 的會場長什麼樣子：

這是第一天去.."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><meta name="image" content="https://life.huli.tw/img/def-con-30-ctf-final-2-4444cf3645e/1__ewjEJY747YSAgd__W882Byw.jpeg"><meta name="original-source" content="https://life.huli.tw/2022/08/16/def-con-30-ctf-final-2-4444cf3645e/"><link rel="canonical" href="https://life.huli.tw/2022/08/16/def-con-30-ctf-final-2-4444cf3645e/"><meta property="og:locale" content="zh-TW"><meta property="og:type" content="article"><meta property="og:title" content="DEF CON 30 CTF final 遊記（中） - Huli's blog"><meta property="og:description" content="上一篇裡面寫到了從台灣到美國的過程，以及對拉斯維加斯的一些心得，這篇就來寫一下 DEF CON 本身以及 CTF 的一些心得。
讓我們先來看一下 DEF CON 的會場長什麼樣子：

這是第一天去.."><meta property="og:url" content="https://life.huli.tw/2022/08/16/def-con-30-ctf-final-2-4444cf3645e/"><meta property="og:site_name" content="Huli's blog"><meta property="og:image" content="https://life.huli.tw/img/def-con-30-ctf-final-2-4444cf3645e/1__ewjEJY747YSAgd__W882Byw.jpeg"><meta name="twitter:title" content="DEF CON 30 CTF final 遊記（中） - Huli's blog"><meta name="twitter:image" content="https://life.huli.tw/img/def-con-30-ctf-final-2-4444cf3645e/1__ewjEJY747YSAgd__W882Byw.jpeg"><meta name="twitter:description" content="上一篇裡面寫到了從台灣到美國的過程，以及對拉斯維加斯的一些心得，這篇就來寫一下 DEF CON 本身以及 CTF 的一些心得。
讓我們先來看一下 DEF CON 的會場長什麼樣子：

這是第一天去.."><meta name="twitter:card" content="summary_large_image"><meta name="google-site-verification" content="lTAMT4U8v-CtkYRIo8AmGaACB3EikdUYpiTHAylwGPE"><!-- Google Analytics --><!-- End Google Analytics --><link rel="icon" href="/images/lidemy_logo.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="上一篇裡面寫到了從台灣到美國的過程，以及對拉斯維加斯的一些心得，這篇就來寫一下 DEF CON 本身以及 CTF 的一些心得。
讓我們先來看一下 DEF CON 的會場長什麼樣子：

這是第一天去的時候在門口拍的，就是個很大的會議廳，這只是入口而已，真的議程在其他地方，然後這是今年的 badge：

好像是個可以拿來錄音然後做取樣的小玩具，後面要放三顆電池才會動，但因為我聽隊友說如果被金屬碰到一不小心可能會短路然後燒掉（推特上有人講的），所以其實我從頭到尾都沒打開過，到現在也是。
接著既然來講一下 DEF CON，這邊除了有幾間是給議程以外，其他很多間都是給不同的「Villege」，可以想成是很多不同的主題，例如說 Car Hacking Villege：

就是在探討各種跟汽車相關的攻擊手法，所以你可以看.."><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Huli's blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Huli's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">DEF CON 30 CTF final 遊記（中）</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">點擊返回開頭</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首頁</a></h3><h3 class="is-inline-block"><a href="/about">關於我</a></h3><h3 class="is-inline-block"><a href="/archives">文章列表</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首頁</a></h3><h3 class="is-inline-block"><a href="/about">關於我</a></h3><h3 class="is-inline-block"><a href="/archives">文章列表</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Day2"><span class="toc-text">Day2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Day3"><span class="toc-text">Day3</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/%E6%97%85%E9%81%8A"><i class="tag post-item-tag">旅遊</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">DEF CON 30 CTF final 遊記（中）</h1><time class="has-text-grey" datetime="2022-08-16T05:32:47.647Z">2022-08-16</time><article class="mt-2 post-content"><p>上一篇裡面寫到了從台灣到美國的過程，以及對拉斯維加斯的一些心得，這篇就來寫一下 DEF CON 本身以及 CTF 的一些心得。</p>
<p>讓我們先來看一下 DEF CON 的會場長什麼樣子：</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__ewjEJY747YSAgd__W882Byw.jpeg"></p>
<p>這是第一天去的時候在門口拍的，就是個很大的會議廳，這只是入口而已，真的議程在其他地方，然後這是今年的 badge：</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__HwqbCMCdt4uBqJkWmX6EgQ.jpeg"></p>
<p>好像是個可以拿來錄音然後做取樣的小玩具，後面要放三顆電池才會動，但因為我聽隊友說如果被金屬碰到一不小心可能會短路然後燒掉（推特上有人講的），所以其實我從頭到尾都沒打開過，到現在也是。</p>
<p>接著既然來講一下 DEF CON，這邊除了有幾間是給議程以外，其他很多間都是給不同的「Villege」，可以想成是很多不同的主題，例如說 Car Hacking Villege：</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__gWK__G3P__DAljuZmuOefcfQ.jpeg"></p>
<p>就是在探討各種跟汽車相關的攻擊手法，所以你可以看到超多 Villege，例如說有 Physical Hacking 的，甚至還有衛星相關的之類的。而除了我這次參加的 DEF CON CTF 以外，現場還有各種其他的 CTF，可以說是 CTF 遍地開花。</p>
<p>例如說有一個好像就是社交工程的 CTF，然後現場直接放幾台電話，應該是要你直接現場社交工程XD</p>
<p>或是有一個聽我隊友說應該是現場弄一個會偷資料的 WiFi 之類的，會把偷來的東西打碼以後直接投影出來：</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__hXXoPepFUrVLTh1CmASYHQ.jpeg"></p>
<p>總之呢，現場可以看到各式各樣的主題，還滿有趣的。不過因為這次主要是來參賽，所以也沒有聽議程，然後會場也只是隨意逛逛看看有什麼而已。</p>
<p>接著來寫一下這次 CTF 的心得，這次我是跟著 Water Paddler 這個隊伍參賽，而不是台灣聯隊（<a href="mailto:&#66;&#97;&#x6c;&#x73;&#x6e;&#46;&#x32;&#x31;&#55;&#x40;&#x54;&#83;&#74;&#x2e;&#116;&#x77;">&#66;&#97;&#x6c;&#x73;&#x6e;&#46;&#x32;&#x31;&#55;&#x40;&#x54;&#83;&#74;&#x2e;&#116;&#x77;</a>），我們這支隊伍基本上是個國際隊伍，像這次去 on-site 的選手就來自世界各國，跟其他 CTF 隊伍相比，比較像是那種網路上的「公會」那種概念，成員之間彼此都沒見過面，所以這次同時也是網友見面會。。</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__SKXIhnbF__om9JtndP__IETg.jpeg"></p>
<p>實體的場地大概長這樣：</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__2sBg1k4z8EPaGKKCEoZNkA.jpeg"></p>
<p>左邊很亮那個燈那裡是主辦單位坐的地方。</p>
<p>遠方那些一團一團的人，都圍著一個圓桌，最多坐八個人，一張圓桌就是一個隊伍。所以你可以看到隊伍之間距離是滿近的，大聲討論的話可能會被聽到（我以為會遠一點）</p>
<p>然後現場會放很吵的音樂，所以大部分選手都有戴耳機來隔絕音樂。另外還有一點很傻眼，就是開賽以後他們把大門打開，開始放人進來參觀…這個超乎我預料以外，我本來以為是個封閉場所，沒想到開放到不行，變成跟動物園一樣，會有很多會眾走進來參觀。</p>
<p>至於右前方那個桌子則是這次的新賽制：LiveCTF，這個是一對一的電競比賽，參賽選手的畫面會同步到 YouTube 上面，也會有主播跟賽評來講解現在選手的狀況。</p>
<p>參賽的隊伍總共 16 隊，LiveCTF 每次是一對一，然後是單淘汰賽，不同名次有不同分數：</p>
<ul>
<li>第一名：4011 分</li>
<li>第二名：2674 分</li>
<li>3~4 名：1337 分</li>
<li>5~8 名：668 分</li>
<li>9~16 名：0 分</li>
</ul>
<p>而除了 LiveCTF 以外的主賽制的分數計算是每 5 分鐘一輪，在這一輪之內你要做到幾件事情：</p>
<ol>
<li>保證自己服務不會壞掉（SLA），壞掉 -30 分</li>
<li>修補漏洞，保護自己的服務不被打下來（Defense）</li>
<li>打別的隊伍，拿到他們的 flag（Attack）</li>
</ol>
<p>做到會加分，沒做到會扣分。</p>
<p>服務被打下來，flag 被拿到的話會 -15 分，這 15 分會分配給其他攻擊成功的隊伍，所以一道題目理論上一輪可以拿的最高分數應該是 15*15 &#x3D; 225 分。</p>
<p>這邊可以看到 LiveCTF 的分數有多誇張，第一名的 4000 分就是你要在主賽事當中打全場打 18 輪，也就是 90 分鐘，在中間完全沒有人可以攻擊以及防禦，才能拿到 4000 分。</p>
<p>第一天剛開賽就放出兩題，其中一題是 web，所以我們這隊的幾個人就開始看 web，是個 Java 的服務，然後光是看懂資料到底怎麼傳的就花了不少時間。</p>
<p>然後主辦單位有提供延遲 20 分鐘的網路封包內容，在某個時刻我們從網路封包裡面發現其他隊伍的攻擊流量，因為是明文的所以可以直接抄來用，「抄別人作業」其實在比賽中也滿重要的，你越早抄到，就可以拿越多分。</p>
<p>而攻擊的隊伍也要想辦法不讓別人抄作業，不然辛苦努力得來的分數都被整碗端去了QQ</p>
<p>第一天裡面官方的 SLA check 會出一些怪問題，例如說服務明明就沒動它，但是卻說 SLA failed 然後被扣分之類的，總之就是小問題不斷。不過 web 那一題雖然我們到最後還是沒有很清楚到底怎麼攻擊，但就是先把感覺會有問題的地方 patch 掉（要 patch jar 好麻煩…），最後應該是防住了大部分的攻擊。</p>
<p>總之呢，第一天的比賽是從 11 點到 7 點（表定 10 點到 6 點，但延遲一個小時開始），結束之後主辦單位說中間那些 SLA fail 的東西他們會全部 review 一遍，然後把分數更正。</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__E__EbhPIwn9nJfaVrdXFTuA.png"></p>
<p>第一天結束後，我們隊伍暫居第三名，然後今天的題目第二天都不會出現，所以沒有回家作業。</p>
<h3 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h3><p>第二天的計分板是主辦單位修過的版本，其中有一個隊伍因為昨天用 fork bomb 所以被扣分，不過儘管如此，名次卻比第一天高了一位XD</p>
<p>早上有跟台灣聯隊稍微聊一下，也算是個網友見面會，見到了以前有看過部落格文章的 <a target="_blank" rel="noopener" href="https://blog.kaibro.tw/">KaiBro</a> 跟 <a target="_blank" rel="noopener" href="https://bookgin.tw/">bookgin</a>！</p>
<p>第二天沒有 web 題，不過我在刷後台的時候看到了一個應該是自動排程釋出的服務：「web4ransom」，就想說下午應該會出這個（結果都沒有出）。</p>
<p>而第二天也出現了另一種類型的題目：King of the Hill，這次的題目是這樣的，server 那邊會執行 <code>./vm offset file1 file2</code> 然後每個隊伍都可以上傳檔案，每一輪的 offset 會不同，看誰的檔案會贏。</p>
<p>至於贏的條件是什麼，就要 reverse vm binary 才會知道了。</p>
<p>計分板長得像這樣：</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__8Mwlaa1yF7zfLrJwMyYB0A.png"></p>
<p>一樣是每五分鐘一輪。</p>
<p>剛開始的時候大家都是 TIE，接著過一陣子我們發現 Balsn 傳了一個檔案之後直接贏全場，就趕快抄作業拿來用，也跟著贏，接著就有更多隊伍發現，於是沒抄的就變成弱勢了，後來到中場變成大家都抄一樣的檔案，又變回平手XDD</p>
<p>然後主辦單位的 infra 又開始不穩，有幾輪延遲，然後有幾輪結果是 N&#x2F;A，完全不知道自己到底是贏還輸。</p>
<p>到後半段的時候則是有隊伍開始慢慢把 vm 逆完了，知道規則是什麼，可以寫出在主場必贏的檔案。</p>
<p>然後今天的 LiveCTF 我們輸掉了，所以在這部分沒有分數可以拿。</p>
<p>而這天的其他題目在賽後有說明天會繼續用，這就是寫作業的信號了，今天賽後有很多選手基本上是熬夜沒睡覺在研究那幾題，打算隔天早上大殺四方。</p>
<p>而我們打 web 的有好理由相信今天看到的 web4random 既然昨天沒出，明天應該會出，所以就準備明天再打一題 web。</p>
<p>喔對了，今天結束後我們隊伍依然暫居第三。</p>
<h3 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h3><p>最後一天的比賽只從 10 點比到 2 點，半天而已，總共 4 個小時。</p>
<p>經過一個晚上的準備，有一兩題我們已經準備好 exploit，準備開始拿分數了，一開賽的時候滿順利的，有一輪甚至直接拿到 +300 分，殊不知接下來就悲劇了。</p>
<p>還記得我說過一輪是 5 分鐘嗎？接下來每一輪開始慢慢變長，主辦單位說是因為碰到一些問題在修，所以會延長，而其中某一輪甚至維持了快一個小時…</p>
<p>這就代表原本有 12 輪可以拿分，變成只有 1 輪，對於可以拿分的隊伍來說其實是少了很多分數的。</p>
<p>而這中間主辦單位也有人跑來說我們其中有一題的 patch 雖然有過 SLA，但是不行（？？？），原因是後台顯示的 SLA 其實只有一半，另外一半是線下做的，要兩個部分都過關才算數。</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__br0Zy8C__QBRvWMU3CGxvpQ.png"></p>
<p>然後可能是因為今天從開賽就很混亂，所以主辦單位表示今天不會有任何新的題目，因此昨天盼望的那題 web 也沒了。</p>
<p>round delay 的狀況一直沒有解決，scoreboard 遲遲沒有更新，我們選手自己有個非官方的 Discord 群組，我看到裡面已經有人開始揪下棋跟打 Tetris，因為我那時也沒什麼事情做，所以就進去一起玩（拿了幾次第一名，以前玩Facebook tetris battle 的肌肉記憶還存在一部分）。</p>
<p>結果，玩著玩著到了一點的時候，我隊友突然說比賽結束了！因為主辦單位一直沒有辦法解決 infra 的問題，所以乾脆提早一個小時結束。</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__49CvdwgpdkAvNhZl25i67Q.png"></p>
<p>於是就在我還在打 Tetris 的時候，我的第一次 final 就這樣在混亂中結束了，而比賽也停在了 tick 196，也出現了一堆選手做的迷因：</p>
<p><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__gaQy88Ni7DveDDPLDnFIXw.jpeg"><br><img src="/img/def-con-30-ctf-final-2-4444cf3645e/1__XJLXb1dat____ivTZfQn1biw.png"></p>
<p>其實滿傻眼的，而且很多選手應該覺得滿幹的，昨天熬夜做的作業就這樣化為塵土，賽後可以看到一堆選手在推特上面開噴，人之常情。</p>
<p>LiveCTF 則是繼續比總決賽，拿了冠軍的隊伍加分之後變成了第三名，我們掉到第四名去，為這次的 final 畫下了句點。</p>
<p>聽說每年的 DEF CON CTF 都會出一些小問題，但今年似乎是出最多問題或是最嚴重的，第三天真的超級混亂。</p>
<p>說實在的覺得滿可惜，雖然前兩天問題不斷但也都覺得還 OK，第三天就是真的大爆炸沒辦法救了。只能期待明年 infra 會穩一點，然後繼續努力繼續加油。</p>
<p>第三篇傳送門：[&#x2F;2022&#x2F;08&#x2F;17&#x2F;def-con-30-ctf-final-3-e19eeeed8e44&#x2F;)</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2022/08/17/def-con-30-ctf-final-3-e19eeeed8e44/" title="DEF CON 30 CTF final 遊記（下）"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一頁: DEF CON 30 CTF final 遊記（下）</span></a><a class="button is-default" href="/2022/08/16/def-con-30-ctf-final-1-79220bba7f02/" title="DEF CON 30 CTF final 遊記（上）"><span class="has-text-weight-semibold">下一頁: DEF CON 30 CTF final 遊記（上）</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="aszx87410/huli-life-blog" src="https://utteranc.es/client.js" issue-term="title" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/aszx87410"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml"><i class="iconfont icon-rss"></i></a><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com/huli.blog"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> Huli 2023</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>